<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="FFGUITool.MainWindow"
        Title="FFmpeg ËßÜÈ¢ëÂéãÁº©Â∑•ÂÖ∑"
        Width="800" Height="700"
        MinWidth="600" MinHeight="600">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ËèúÂçïÊ†è -->
        <Menu Grid.Row="0">
            <MenuItem Header="Êñá‰ª∂(_F)">
                <MenuItem Header="ÈÄÄÂá∫(_X)" Name="ExitMenuItem" Click="ExitMenuItem_Click"/>
            </MenuItem>
            <MenuItem Header="Â∑•ÂÖ∑(_T)">
                <MenuItem Header="FFmpegËÆæÁΩÆ(_S)" Name="FFmpegSettingsMenuItem" Click="FFmpegSettingsMenuItem_Click"/>
                <Separator/>
                <MenuItem Header="ÈáçÊñ∞Ê£ÄÊµãFFmpeg(_R)" Name="RedetectFFmpegMenuItem" Click="RedetectFFmpegMenuItem_Click"/>
            </MenuItem>
            <MenuItem Header="Â∏ÆÂä©(_H)">
                <MenuItem Header="ÂÖ≥‰∫é(_A)" Name="AboutMenuItem" Click="AboutMenuItem_Click"/>
            </MenuItem>
        </Menu>

        <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
        <Grid Grid.Row="1" Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="120"/>
            </Grid.RowDefinitions>

            <!-- È°∂ÈÉ®Ê†áÈ¢ò -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,20">
                <TextBlock Text="FFGUITool" 
                           FontSize="24" FontWeight="Bold"/>
                <TextBlock Name="FFmpegStatusText" Text=" - FFmpegÁä∂ÊÄÅÊ£ÄÊµã‰∏≠..." 
                           FontSize="14" VerticalAlignment="Bottom" 
                           Margin="10,0,0,2" Foreground="Gray"/>
            </StackPanel>

            <!-- ‰∏ªË¶ÅÊìç‰ΩúÂå∫Âüü -->
            <ScrollViewer Grid.Row="1">
                <StackPanel Spacing="15">
                    
                    <!-- Êñá‰ª∂ÈÄâÊã©Âå∫Âüü -->
                    <Border BorderBrush="Gray" BorderThickness="1" 
                            CornerRadius="5" Padding="15">
                        <StackPanel Spacing="10">
                            <TextBlock Text="Êñá‰ª∂ÈÄâÊã©" FontWeight="Bold" FontSize="16"/>
                            
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBox Grid.Column="0" Name="InputPathTextBox" 
                                         Watermark="ÈÄâÊã©ËßÜÈ¢ëÊñá‰ª∂ÊàñÊñá‰ª∂Â§π..." 
                                         IsReadOnly="True"/>
                                <Button Grid.Column="1" Content="ÈÄâÊã©Êñá‰ª∂" 
                                        Name="SelectFileButton" Margin="5,0,0,0"
                                        Click="SelectFileButton_Click"/>
                                <Button Grid.Column="2" Content="ÈÄâÊã©Êñá‰ª∂Â§π" 
                                        Name="SelectFolderButton" Margin="5,0,0,0"
                                        Click="SelectFolderButton_Click"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- ÂéüËßÜÈ¢ë‰ø°ÊÅØÊòæÁ§∫ÔºàÈÄâÊã©ËßÜÈ¢ëÂêéÊòæÁ§∫Ôºâ-->
                    <Border Name="VideoInfoPanel" BorderBrush="PeachPuff" BorderThickness="1" 
                            CornerRadius="5" Padding="15" Background="#000"
                            IsVisible="False">
                        <StackPanel Spacing="8">
                            <TextBlock Text="ÂéüËßÜÈ¢ë‰ø°ÊÅØ" FontWeight="Bold" FontSize="16" Foreground="#4682B4"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" MinWidth="100"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto" MinWidth="100"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <!-- Á¨¨‰∏ÄË°å -->
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Êñá‰ª∂Â§ßÂ∞è:" FontWeight="SemiBold"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" Name="OriginalSizeText" Text="-" Margin="5,0,15,0"/>
                                <TextBlock Grid.Row="0" Grid.Column="2" Text="Êó∂Èïø:" FontWeight="SemiBold"/>
                                <TextBlock Grid.Row="0" Grid.Column="3" Name="DurationText" Text="-" Margin="5,0,0,0"/>
                                
                                <!-- Á¨¨‰∫åË°å -->
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="ÂéüÊØîÁâπÁéá:" FontWeight="SemiBold" Margin="0,5,0,0"/>
                                <TextBlock Grid.Row="1" Grid.Column="1" Name="OriginalBitrateText" Text="-" Margin="5,5,15,0"/>
                                <TextBlock Grid.Row="1" Grid.Column="2" Text="ÂàÜËæ®Áéá:" FontWeight="SemiBold" Margin="0,5,0,0"/>
                                <TextBlock Grid.Row="1" Grid.Column="3" Name="ResolutionText" Text="-" Margin="5,5,0,0"/>
                                
                                <!-- Á¨¨‰∏âË°å -->
                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Â∏ßÁéá:" FontWeight="SemiBold" Margin="0,5,0,0"/>
                                <TextBlock Grid.Row="2" Grid.Column="1" Name="FramerateText" Text="-" Margin="5,5,15,0"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- ÂéãÁº©ÂèÇÊï∞ËÆæÁΩÆ -->
                    <Border BorderBrush="Gray" BorderThickness="1" 
                            CornerRadius="5" Padding="15">
                        <StackPanel Spacing="12">
                            <TextBlock Text="ÂéãÁº©ËÆæÁΩÆ" FontWeight="Bold" FontSize="16"/>
                            
                            <!-- ÂéãÁº©ÁôæÂàÜÊØîËæìÂÖ•Ê°Ü -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0" Text="ÂéãÁº©Áéá:" 
                                           VerticalAlignment="Center"/>
                                <NumericUpDown Grid.Column="1" Name="CompressionNumericUpDown" 
                                               Minimum="10" Maximum="100" Value="70"
                                               Increment="1" FormatString="0"
                                               Margin="5,0,0,0" Height="32"/>
                                <TextBlock Grid.Column="2" Text="%" 
                                           VerticalAlignment="Center" Margin="10,0,0,0"/>
                                <TextBlock Grid.Column="3" Text="ÔºàÊï∞ÂÄºË∂äÂ∞èÂéãÁº©Ë∂äÂ§öÔºâ" 
                                           VerticalAlignment="Center" Margin="15,0,0,0"
                                           Foreground="Gray" FontSize="12"/>
                            </Grid>

                            <!-- ÊâãÂä®ÊØîÁâπÁéáÊéßÂà∂ - ‰ºòÂåñÂ∏ÉÂ±ÄÁâàÊú¨ -->
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <!-- Á¨¨‰∏ÄË°åÔºöÊ†áÁ≠æÂíåÂ∏ÆÂä©ÊåâÈíÆ -->
                                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,8">
                                    <TextBlock Text="ÊâãÂä®ÊØîÁâπÁéá:" VerticalAlignment="Center"/>
                                    <!-- ÈóÆÂè∑ÊèêÁ§∫ÊåâÈíÆ -->
                                    <Button Name="BitrateHelpButton"
                                            Content="?" Width="20" Height="20"
                                            FontSize="12" FontWeight="Bold"
                                            Background="LightBlue" Foreground="White"
                                            CornerRadius="10" Margin="8,0,0,0"
                                            VerticalAlignment="Center"
                                            PointerEntered="BitrateHelpButton_PointerEntered"
                                            PointerExited="BitrateHelpButton_PointerExited"/>
                                </StackPanel>
                                
                                <!-- Á¨¨‰∫åË°åÔºöËæìÂÖ•Ê°Ü„ÄÅÊªëÂä®Êù°ÂíåÊòæÁ§∫ÂÄº -->
                                <Grid Grid.Row="1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120"/>
                                        <ColumnDefinition Width="*" MinWidth="200"/>
                                        <ColumnDefinition Width="80"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <!-- ÊâãÂä®ËæìÂÖ•Ê°Ü -->
                                    <NumericUpDown Grid.Column="0" Name="BitrateNumericUpDown" 
                                                   Minimum="1" Maximum="50000" Value="2000"
                                                   Increment="100" FormatString="0"
                                                   Height="32" Margin="0,0,10,0"/>
                                    
                                    <!-- ÊªëÂä®Êù° -->
                                    <Slider Grid.Column="1" Name="BitrateSlider" 
                                            Minimum="1" Maximum="50000" Value="2000"
                                            TickFrequency="500" IsSnapToTickEnabled="False"
                                            ValueChanged="BitrateSlider_ValueChanged"
                                            Margin="0,0,10,0"/>
                                            
                                    <!-- ÊòæÁ§∫ÂÄº -->
                                    <TextBlock Grid.Column="2" Name="BitrateValueText" 
                                               Text="2000k" VerticalAlignment="Center" 
                                               TextAlignment="Right" FontWeight="SemiBold"/>
                                </Grid>
                            </Grid>

                            <!-- ÊØîÁâπÁéáË≠¶Âëä‰ø°ÊÅØ -->
                            <TextBlock Name="BitrateWarningText" 
                                       Text="‚ö† Ë≠¶ÂëäÔºöÂΩìÂâçÊØîÁâπÁéáÈ´ò‰∫éÂéüËßÜÈ¢ëÔºåÊñá‰ª∂ÂèØËÉΩ‰ºöÂèòÂ§ßÔºÅ" 
                                       Foreground="Orange" FontWeight="Bold"
                                       FontSize="12" IsVisible="False"
                                       Margin="0,5,0,0" TextWrapping="Wrap"/>

                            <!-- È¢Ñ‰º∞ÁªìÊûúÊòæÁ§∫ -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0" Text="È¢Ñ‰º∞ÁªìÊûú:" 
                                           VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Name="EstimatedBitrateText" 
                                           Text="ËØ∑ÂÖàÈÄâÊã©ËßÜÈ¢ëÊñá‰ª∂" VerticalAlignment="Center"
                                           Foreground="Gray" Margin="5,0,0,0" TextWrapping="Wrap"/>
                            </Grid>

                            <!-- ÁºñÁ†ÅÂô®ÈÄâÊã© -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0" Text="ÁºñÁ†ÅÂô®:" 
                                           VerticalAlignment="Center"/>
                                <ComboBox Grid.Column="1" Name="CodecComboBox" 
                                          SelectedIndex="0" SelectionChanged="CodecComboBox_SelectionChanged"
                                          Margin="5,0,0,0" Height="32">
                                    <ComboBoxItem Content="H.264 (libx264) - ÂÖºÂÆπÊÄßÊúÄÂ•Ω" Tag="libx264"/>
                                    <ComboBoxItem Content="H.265 (libx265) - ÂéãÁº©ÁéáÊõ¥È´ò" Tag="libx265"/>
                                    <ComboBoxItem Content="VP9 (libvpx-vp9) - ÂºÄÊ∫êÁºñÁ†Å" Tag="libvpx-vp9"/>
                                </ComboBox>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- ËæìÂá∫ËÆæÁΩÆ -->
                    <Border BorderBrush="Gray" BorderThickness="1" 
                            CornerRadius="5" Padding="15">
                        <StackPanel Spacing="10">
                            <TextBlock Text="ËæìÂá∫ËÆæÁΩÆ" FontWeight="Bold" FontSize="16"/>
                            
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBox Grid.Column="0" Name="OutputPathTextBox" 
                                         Watermark="ÈÄâÊã©ËæìÂá∫Êñá‰ª∂Â§π..." 
                                         IsReadOnly="True"/>
                                <Button Grid.Column="1" Content="ÈÄâÊã©ËæìÂá∫Êñá‰ª∂Â§π" 
                                        Name="SelectOutputButton" Margin="5,0,0,0"
                                        Click="SelectOutputButton_Click"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                </StackPanel>
            </ScrollViewer>

            <!-- ÂàÜÈöîÁ∫ø -->
            <Border Grid.Row="2" Height="1" Background="Gray" Margin="0,10"/>

            <!-- CLIÂëΩ‰ª§ÊòæÁ§∫ÂíåÊâßË°åÂå∫Âüü -->
            <Grid Grid.Row="3">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="ÁîüÊàêÁöÑFFmpegÂëΩ‰ª§:" 
                           FontWeight="Bold" Margin="0,0,0,5"/>
                
                <TextBox Grid.Row="1" Name="CommandTextBox" 
                         Background="Black" Foreground="White" 
                         FontFamily="Consolas" FontSize="12"
                         IsReadOnly="True" TextWrapping="Wrap"
                         ScrollViewer.VerticalScrollBarVisibility="Auto"/>
                
                <Grid Grid.Row="2" Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <ProgressBar Grid.Column="0" Name="ProgressBar" 
                                 Height="30" IsVisible="False"/>
                    <Button Grid.Column="1" Content="ÊâßË°å" Name="ExecuteButton" 
                            Width="100" Height="30" Margin="10,0,0,0"
                            Click="ExecuteButton_Click" IsEnabled="False"/>
                </Grid>
            </Grid>

        </Grid>
        
        <!-- ÊØîÁâπÁéáÂ∏ÆÂä©ÊèêÁ§∫ÂºπÂá∫Ê°Ü -->
        <Popup Name="BitrateTooltipPopup" 
               PlacementMode="Right"
               HorizontalOffset="10"
               IsLightDismissEnabled="False">
            <Border Background="White" 
                    BorderBrush="Gray" 
                    BorderThickness="1" 
                    CornerRadius="5" 
                    Padding="20"
                    MinWidth="350"
                    MaxWidth="450">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" OffsetY="2" Opacity="0.3"/>
                </Border.Effect>
                <StackPanel Spacing="12">
                    <TextBlock Text="‰ªÄ‰πàÊòØÊØîÁâπÁéáÔºü" 
                               FontWeight="Bold" 
                               FontSize="16" 
                               Foreground="#2E3440"/>
                    
                    <TextBlock TextWrapping="Wrap" 
                               FontSize="13" 
                               LineHeight="1.4"
                               Foreground="#5E81AC">
                        ÊØîÁâπÁéáÔºàBitrateÔºâÊòØÊåáÂçï‰ΩçÊó∂Èó¥ÂÜÖ‰º†ËæìÁöÑÊï∞ÊçÆÈáèÔºåÈÄöÂ∏∏‰ª• kbpsÔºàÂçÉÊØîÁâπÊØèÁßíÔºâ‰∏∫Âçï‰Ωç„ÄÇÂÆÉÊòØË°°ÈáèËßÜÈ¢ëË¥®ÈáèÂíåÊñá‰ª∂Â§ßÂ∞èÁöÑÂÖ≥ÈîÆÊåáÊ†á„ÄÇ
                    </TextBlock>
                    
                    <Border Height="1" Background="#E5E9F0" Margin="0,5,0,5"/>
                    
                    <TextBlock Text="ÂØπËßÜÈ¢ëÂéãÁº©ÁöÑÂΩ±ÂìçÔºö" 
                               FontWeight="SemiBold" 
                               FontSize="14"
                               Foreground="#2E3440"/>
                               
                    <StackPanel Spacing="6" Margin="15,0,0,0">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="‚Ä¢" FontWeight="Bold" Foreground="#81A1C1"/>
                            <TextBlock TextWrapping="Wrap" FontSize="12" Foreground="#4C566A">
                                <Run Text="Êõ¥È´òÁöÑÊØîÁâπÁéá" FontWeight="SemiBold"/> = Êõ¥Â•ΩÁöÑÁîªË¥®Ôºå‰ΩÜÊñá‰ª∂Êõ¥Â§ß
                            </TextBlock>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="‚Ä¢" FontWeight="Bold" Foreground="#81A1C1"/>
                            <TextBlock TextWrapping="Wrap" FontSize="12" Foreground="#4C566A">
                                <Run Text="Êõ¥‰ΩéÁöÑÊØîÁâπÁéá" FontWeight="SemiBold"/> = Êõ¥Â∞èÁöÑÊñá‰ª∂Ôºå‰ΩÜÁîªË¥®‰∏ãÈôç
                            </TextBlock>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="‚Ä¢" FontWeight="Bold" Foreground="#81A1C1"/>
                            <TextBlock TextWrapping="Wrap" FontSize="12" Foreground="#4C566A">
                                Âª∫ËÆÆÊ†πÊçÆËßÜÈ¢ëÂÜÖÂÆπÂíåÁî®ÈÄîÈÄâÊã©ÂêàÈÄÇÁöÑÊØîÁâπÁéá
                            </TextBlock>
                        </StackPanel>
                    </StackPanel>
                    
                    <Border Height="1" Background="#E5E9F0" Margin="0,8,0,5"/>
                    
                    <TextBlock Text="ÂèÇËÄÉÂÄºÔºàÊé®ËçêËåÉÂõ¥ÔºâÔºö" 
                               FontWeight="SemiBold" 
                               FontSize="14"
                               Foreground="#2E3440"/>
                               
                    <Grid Margin="15,0,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="4K (2160p):" FontWeight="SemiBold" FontSize="12" Foreground="#5E81AC" Margin="0,0,15,3"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" Text="15000-25000 kbps" FontSize="12" Foreground="#4C566A" Margin="0,0,0,3"/>
                        
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="1080p:" FontWeight="SemiBold" FontSize="12" Foreground="#5E81AC" Margin="0,0,15,3"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" Text="4000-8000 kbps" FontSize="12" Foreground="#4C566A" Margin="0,0,0,3"/>
                        
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="720p:" FontWeight="SemiBold" FontSize="12" Foreground="#5E81AC" Margin="0,0,15,3"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" Text="2000-4000 kbps" FontSize="12" Foreground="#4C566A" Margin="0,0,0,3"/>
                        
                        <TextBlock Grid.Row="3" Grid.Column="0" Text="480p:" FontWeight="SemiBold" FontSize="12" Foreground="#5E81AC" Margin="0,0,15,0"/>
                        <TextBlock Grid.Row="3" Grid.Column="1" Text="1000-2000 kbps" FontSize="12" Foreground="#4C566A"/>
                    </Grid>
                    
                    <!-- ÂÖ≥Èó≠ÊèêÁ§∫ -->
                    <TextBlock Text="üí° ÊèêÁ§∫ÔºöÁßªÂºÄÈº†Ê†áÂç≥ÂèØÂÖ≥Èó≠Ê≠§ÊèêÁ§∫"
                               FontSize="11" 
                               Foreground="#8FBCBB"
                               HorizontalAlignment="Center"
                               Margin="0,10,0,0"
                               FontStyle="Italic"/>
                </StackPanel>
            </Border>
        </Popup>
    </Grid>
</Window>