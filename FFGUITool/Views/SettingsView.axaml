<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:FFGUITool.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="FFGUITool.Views.SettingsView"
             x:DataType="vm:SettingsViewModel">
    
    <!-- ËÆæÁΩÆËÆæËÆ°Êó∂DataContext‰ª•ÊîØÊåÅËÆæËÆ°Êó∂È¢ÑËßà -->
    <Design.DataContext>
        <vm:SettingsViewModel />
    </Design.DataContext>
    
    <ScrollViewer Padding="20">
        <StackPanel Spacing="20">
            <!-- FFmpegËÆæÁΩÆ -->
            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="15">
                <StackPanel Spacing="15">
                    <TextBlock Text="FFmpeg ËÆæÁΩÆ" FontWeight="Bold" FontSize="16"/>
                    
                    <!-- FFmpegË∑ØÂæÑ -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="FFmpegË∑ØÂæÑ:" VerticalAlignment="Center"/>
                        <TextBox Grid.Column="1" 
                                 Text="{Binding FFmpegPath}" 
                                 IsReadOnly="True"
                                 Margin="10,0"
                                 VerticalAlignment="Center"/>
                        <Button Grid.Column="2" 
                                Content="ÊµèËßà" 
                                Command="{Binding BrowseFFmpegCommand}"
                                Width="80"
                                Margin="0,0,5,0"/>
                        <Button Grid.Column="3" 
                                Content="Ëá™Âä®Ê£ÄÊµã" 
                                Command="{Binding TestFFmpegCommand}"
                                Width="80"/>
                    </Grid>

                    <!-- FFmpegÁâàÊú¨ -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="ÁâàÊú¨‰ø°ÊÅØ:" VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="1" 
                                   Text="{Binding FFmpegVersion}" 
                                   Margin="10,0"
                                   Foreground="Gray"
                                   VerticalAlignment="Center"/>
                    </Grid>

                    <!-- FFmpegÁä∂ÊÄÅ -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="Áä∂ÊÄÅ:" VerticalAlignment="Center"/>
                        <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="10,0">
                            <Ellipse Width="10" Height="10" 
                                     Fill="{Binding IsFFmpegAvailable, Converter={StaticResource BoolToColorConverter}}"
                                     Margin="0,0,10,0"/>
                            <TextBlock Text="{Binding IsFFmpegAvailable, Converter={StaticResource BoolToStatusTextConverter}}"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>

                    <!-- ÂàÜÈöîÁ∫ø -->
                    <Separator Height="1" Background="LightGray" Margin="0,10"/>

                    <!-- ÂÆâË£ÖÈÄâÈ°π -->
                    <TextBlock Text="ÂÆâË£ÖÈÄâÈ°π" FontWeight="SemiBold" FontSize="14"/>
                    
                    <!-- ‰ªéÂéãÁº©ÂåÖÂÆâË£Ö -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" 
                                   Text="‰ªéÊú¨Âú∞ÂéãÁº©ÂåÖÂÆâË£ÖFFmpeg (ÊîØÊåÅ.zipÊ†ºÂºè)" 
                                   VerticalAlignment="Center"
                                   Foreground="Gray"/>
                        <Button Grid.Column="1" 
                                Content="ÈÄâÊã©ÂéãÁº©ÂåÖ" 
                                Command="{Binding InstallFFmpegCommand}"
                                Width="120"/>
                    </Grid>

                    <!-- ‰∏ãËΩΩÊèêÁ§∫ -->
                    <Border Background="#FFF0F8FF" 
                            BorderBrush="#FF87CEEB" 
                            BorderThickness="1" 
                            CornerRadius="5"
                            Padding="10">
                        <StackPanel Spacing="5">
                            <TextBlock Text="üí° Ëé∑ÂèñFFmpeg" FontWeight="SemiBold"/>
                            <TextBlock TextWrapping="Wrap" FontSize="12" Foreground="#FF555555">
                                Â¶ÇÊûúÊÇ®ËøòÊ≤°ÊúâFFmpegÔºåÂèØ‰ª•‰ªé‰ª•‰∏ãÂú∞ÂùÄ‰∏ãËΩΩÔºö
                            </TextBlock>
                            <TextBlock FontSize="12" Foreground="#FF0066CC" 
                                       Text="https://ffmpeg.org/download.html"
                                       Cursor="Hand"/>
                            <TextBlock TextWrapping="Wrap" FontSize="12" Foreground="#FF555555">
                                WindowsÁî®Êà∑Âª∫ËÆÆ‰∏ãËΩΩ"Windows builds by BtbN"Êàñ"gyan.dev"Êèê‰æõÁöÑÂÆåÊï¥ÁâàÊú¨
                            </TextBlock>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>

            <!-- Â§ÑÁêÜËÆæÁΩÆ -->
            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="15">
                <StackPanel Spacing="15">
                    <TextBlock Text="Â§ÑÁêÜËÆæÁΩÆ" FontWeight="Bold" FontSize="16"/>
                    
                    <!-- ÈªòËÆ§ËæìÂá∫ÁõÆÂΩï -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="ÈªòËÆ§ËæìÂá∫ÁõÆÂΩï:" VerticalAlignment="Center"/>
                        <TextBox Grid.Column="1" 
                                 Text="{Binding DefaultOutputDirectory}" 
                                 IsReadOnly="True"
                                 Margin="10,0"
                                 Watermark="‰ΩøÁî®Ê∫êÊñá‰ª∂ÁõÆÂΩï"
                                 VerticalAlignment="Center"/>
                        <Button Grid.Column="2" 
                                Content="ÊµèËßà" 
                                Command="{Binding BrowseOutputDirectoryCommand}"
                                Width="80"/>
                    </Grid>

                    <!-- Âπ∂Ë°å‰ªªÂä°Êï∞ -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="Âπ∂Ë°å‰ªªÂä°Êï∞:" VerticalAlignment="Center"/>
                        <NumericUpDown Grid.Column="1"
                                       Value="{Binding ParallelTasks}"
                                       Minimum="1"
                                       Maximum="10"
                                       Increment="1"
                                       VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="2" 
                                   Text="(Âª∫ËÆÆ‰∏çË∂ÖËøáCPUÊ†∏ÂøÉÊï∞)" 
                                   Foreground="Gray"
                                   FontSize="12"
                                   VerticalAlignment="Center"
                                   Margin="10,0,0,0"/>
                    </Grid>

                    <!-- Êñá‰ª∂Ë¶ÜÁõñÈÄâÈ°π -->
                    <CheckBox Content="Ëá™Âä®Ë¶ÜÁõñÂ∑≤Â≠òÂú®ÁöÑËæìÂá∫Êñá‰ª∂" 
                              IsChecked="{Binding OverwriteExistingFiles}"/>
                    
                    <!-- ÂÆåÊàêÂêéÊìç‰Ωú -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="200"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="ÂÆåÊàêÂêéÊìç‰Ωú:" VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" SelectedIndex="{Binding AfterProcessingAction}">
                            <ComboBoxItem Content="Êó†Êìç‰Ωú"/>
                            <ComboBoxItem Content="Êí≠ÊîæÊèêÁ§∫Èü≥"/>
                            <ComboBoxItem Content="ÊâìÂºÄËæìÂá∫Êñá‰ª∂Â§π"/>
                            <ComboBoxItem Content="ÂÖ≥Èó≠Â∫îÁî®Á®ãÂ∫è"/>
                        </ComboBox>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- ÁïåÈù¢ËÆæÁΩÆ -->
            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="15">
                <StackPanel Spacing="15">
                    <TextBlock Text="ÁïåÈù¢ËÆæÁΩÆ" FontWeight="Bold" FontSize="16"/>
                    
                    <!-- ‰∏ªÈ¢òËÆæÁΩÆ -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="200"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="‰∏ªÈ¢ò:" VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" SelectedIndex="{Binding ThemeIndex}">
                            <ComboBoxItem Content="Ë∑üÈöèÁ≥ªÁªü"/>
                            <ComboBoxItem Content="ÊµÖËâ≤"/>
                            <ComboBoxItem Content="Ê∑±Ëâ≤"/>
                        </ComboBox>
                    </Grid>

                    <!-- ËØ≠Ë®ÄËÆæÁΩÆ -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="200"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="ËØ≠Ë®Ä:" VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" SelectedIndex="{Binding LanguageIndex}">
                            <ComboBoxItem Content="ÁÆÄ‰Ωì‰∏≠Êñá"/>
                            <ComboBoxItem Content="English"/>
                        </ComboBox>
                    </Grid>

                    <!-- ÂêØÂä®ÈÄâÈ°π -->
                    <CheckBox Content="ÂêØÂä®Êó∂Ëá™Âä®Ê£ÄÊü•FFmpeg" 
                              IsChecked="{Binding AutoCheckFFmpegOnStartup}"/>
                    <CheckBox Content="ÂêØÂä®Êó∂ÊÅ¢Â§ç‰∏äÊ¨°Á™óÂè£Â§ßÂ∞èÂíå‰ΩçÁΩÆ" 
                              IsChecked="{Binding RememberWindowState}"/>
                </StackPanel>
            </Border>

            <!-- ÂÖ≥‰∫é -->
            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="15">
                <StackPanel Spacing="10">
                    <TextBlock Text="ÂÖ≥‰∫é" FontWeight="Bold" FontSize="16"/>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Â∫îÁî®ÂêçÁß∞:" FontWeight="SemiBold"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" Text="FFmpeg GUI Tool" Margin="10,0,0,5"/>
                        
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="ÁâàÊú¨:" FontWeight="SemiBold"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding AppVersion}" Margin="10,0,0,5"/>
                        
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="‰ΩúËÄÖ:" FontWeight="SemiBold"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" Text="brealin" Margin="10,0,0,5"/>
                        
                        <TextBlock Grid.Row="3" Grid.Column="0" Text="Ê°ÜÊû∂:" FontWeight="SemiBold"/>
                        <TextBlock Grid.Row="3" Grid.Column="1" Text="Avalonia UI 11.0.10" Margin="10,0,0,0"/>
                    </Grid>
                    
                    <!-- Êìç‰ΩúÊåâÈíÆ -->
                    <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,10,0,0">
                        <Button Content="Ê£ÄÊü•Êõ¥Êñ∞" Command="{Binding CheckUpdateCommand}" Width="100"/>
                        <Button Content="Êü•ÁúãÊó•Âøó" Command="{Binding OpenLogFolderCommand}" Width="100"/>
                        <Button Content="ÈáçÁΩÆËÆæÁΩÆ" Command="{Binding ResetSettingsCommand}" Width="100"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- ‰øùÂ≠òÊåâÈíÆ -->
            <Button Content="‰øùÂ≠òËÆæÁΩÆ" 
                    Command="{Binding SaveSettingsCommand}"
                    HorizontalAlignment="Center"
                    Width="150"
                    Height="40"
                    FontSize="14"
                    FontWeight="SemiBold"/>
        </StackPanel>
    </ScrollViewer>
</UserControl>